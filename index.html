<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Dutch Green Space Dashboard</title>
    
    <!-- Mapbox GL JS -->
    <link href="https://api.mapbox.com/mapbox-gl-js/v3.0.1/mapbox-gl.css" rel="stylesheet">
    <script src="https://api.mapbox.com/mapbox-gl-js/v3.0.1/mapbox-gl.js"></script>
    
    <!-- Plotly.js for charts -->
    <script src="https://cdn.plot.ly/plotly-2.26.0.min.js"></script>
    
    <!-- Configuration (API keys) -->
    <script src="config.js"></script>
    
    <!-- Custom styles -->
    <link rel="stylesheet" href="static/style.css">
</head>
<body>
    <div class="dashboard">
        <!-- Header -->
        <header class="header">
            <h1>üå≥ Dutch Green Space Analysis</h1>
            <span class="subtitle">Advanced Multi-View Dashboard | CBS + Trivariate Choropleth</span>
        </header>

        <!-- Map Container -->
        <div class="map-container">
            <div id="map"></div>
            
            <!-- Map Controls -->
            <div class="map-controls">
                <button class="control-btn" id="resetView">üè† Reset View</button>
                <button class="control-btn" id="toggleHeight">üìä Toggle 3D</button>
                <button class="control-btn" id="clearSelection">‚úñ Clear Selection</button>
            </div>

            <!-- Trivariate Legend -->
            <div class="legend">
                <h4>Trivariate Color Legend</h4>
                <div class="legend-grid" id="legendGrid">
                    <!-- Generated by JavaScript -->
                </div>
                <div class="legend-labels">
                    <span>Grass</span>
                    <span>Mixed</span>
                    <span>Trees</span>
                </div>
                <div style="text-align: center; margin-top: 8px; font-size: 0.7rem; color: #999;">
                    Bushes ‚Üë
                </div>
            </div>
        </div>

        <!-- Sidebar -->
        <div class="sidebar">
            <!-- Tab Navigation -->
            <div class="tab-container">
                <button class="tab active" data-tab="stats">üìä Statistics</button>
                <button class="tab" data-tab="chart">üìà Analysis</button>
                <button class="tab" data-tab="details">üîç Details</button>
            </div>

            <!-- Statistics Tab -->
            <div class="tab-content active" id="stats-content">
                <div class="stats-panel">
                    <div class="loading">Loading statistics</div>
                </div>
            </div>

            <!-- Chart Tab -->
            <div class="tab-content" id="chart-content">
                <div class="chart-panel">
                    <div class="chart-header">
                        <h3>Correlation Analysis</h3>
                        <div class="chart-controls">
                            <span class="chart-control active" data-x="total_greenery">Total Green</span>
                            <span class="chart-control" data-x="balance_score">Balance Score</span>
                            <span class="chart-control" data-x="trees_pct">Trees %</span>
                            <span class="chart-control" data-x="welfare_recipients">üèõÔ∏è Welfare Recipients</span>
                            <span class="chart-control" data-x="population_total">üë• Population</span>
                        </div>
                    </div>
                    <div id="scatterplot">
                        <div class="loading">Loading chart</div>
                    </div>
                </div>
            </div>

            <!-- Details Tab -->
            <div class="tab-content" id="details-content">
                <div class="details-panel">
                    <div class="details-empty">
                        Click on a postcode area to view detailed information
                    </div>
                    <div class="details-content">
                        <!-- Populated by JavaScript when postcode is selected -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Application Script -->
    <script src="static/script.js"></script>
</body>
</html> 